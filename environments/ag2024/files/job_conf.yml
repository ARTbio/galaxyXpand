# This file is managed by Ansible.
# Do not edit this file manually. Any changes will be automatically reverted.

runners:
  slurm:
    load: galaxy.jobs.runners.slurm:SlurmJobRunner
    drmaa_library_path: /usr/lib/slurm-drmaa/lib/libdrmaa.so.1

handling:
  assign:
    - db-skip-locked

execution:
  default: cluster_1
  environments:
    cluster_1:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=1"
    cluster_2:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=2"
    cluster_3:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=3"
    cluster_7:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=7"

limits:
  - type: anonymous_user_concurrent_jobs
    value: '1'
  - type: registered_user_concurrent_jobs
    value: '8'

  - type: environment_total_concurrent_jobs
    id: cluster_1
    value: 7
  - type: environment_total_concurrent_jobs
    id: cluster_2
    value: 4
  - type: environment_total_concurrent_jobs
    id: cluster_3
    value: 2
  - type: environment_total_concurrent_jobs
    id: cluster_7
    value: 1

tools:
  - class: local # these special tools that aren't parameterized for remote execution - expression tools, upload, etc
    environment: cluster_1

  - id: "bowtie_index_builder_data_manager"
    destination: "cluster_1"

  - id: "trimmomatic"
    destination: "cluster_3"

  - id: "fastqc"
    destination: "cluster_2"

  - id: "seqtk"
    destination: "cluster_3"

  - id: "bowtieForSmallRNA"
    destination: "cluster_7"

  - id: "bowtie_wrapper"
    destination: "cluster_7"

  - id: "multiqc"
    destination: "cluster_7"

  - id: "rseqc"
    destination: "cluster_2"

  - id: "featurecounts"
    destination: "cluster_2"

  - id: "deseq2"
    destination: "cluster_2"

  - id: "volcanoplot"
    destination: "cluster_2"

  - id: "samtools_stats"
    destination: "cluster_3"

  - id: "samtools_sort"
    destination: "cluster_3"

  - id: "samtools_view"
    destination: "cluster_3"

  - id: "samtools_rmdup"
    destination: "cluster_4"

  - id: "sambamba"
    destination: "cluster_3"

  - id: "samtool_filter2"
    destination: "cluster_2"

  - id: "cherry_pick_fasta"
    destination: "cluster_1"

  - id: "small_rna_maps"
    destination: "cluster_1"

  - id: "sr_bowtie_dataset_annotation"
    destination: "cluster_7"

  - id: "sr_bowtie"
    destination: "cluster_7"
