---
# optimize 2 cpu VM GCE

# development branch
galaxy_commit_id: release_24.1

galaxy_config:
  gravity:
    gunicorn:
      bind: "0.0.0.0:4000"
      workers: 2
    handlers:
      job_handlers:
        pools:
          - job-handlers
        processes: 2      # optimisation test
    celery:
      workers: 1          # un seul worker Celery si utilis√©
  
  galaxy:
    admin_users: admin@example.org,tooladmin@galaxy.org
    job_working_directory: /home/galaxy/galaxy/database/jobs
    enable_per_request_sql_debugging: false
    enable_quotas: false
    job_handler_monitor_sleep: 0.05 # test de performance
    # don't let galaxy role injecting this variable, unless galaxy startup crash
    themes_config_file_by_host: {}  # GitHub CI fix

# deploy galaxy static files

galaxy_config_templates:
  - src: "{{ inventory_dir }}/templates/galaxyXpand_welcome.html.j2"
    dest: "{{ galaxy_server_dir }}/static/galaxy_welcome.html"

# deploy galaxyXpand logo and job_conf.yml
galaxy_config_files:
  - src: "{{ inventory_dir }}/files/job_conf.yml"
    dest: "{{ galaxy_config_dir }}/job_conf.yml"
  - src: "{{ inventory_dir }}/files/galaxyXpand_logo.png"
    dest: "{{ galaxy_server_dir }}/static/images/galaxyXpand_logo.png" 

