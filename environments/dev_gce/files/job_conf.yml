# This file is managed by Ansible.
# Do not edit this file manually. Any changes will be automatically reverted.

runners:
  local_runner:
    load: galaxy.jobs.runners.local:LocalJobRunner
    workers: 2
  slurm:
    load: galaxy.jobs.runners.slurm:SlurmJobRunner
    drmaa_library_path: /usr/lib/slurm-drmaa/lib/libdrmaa.so

handling:
  assign:
    - db-skip-locked
  processes:
    job_handlers_0:
    job_handlers_1:

execution:
  default: local_env
  environments:
    local_env:
      runner: local_runner
      tmp_dir: true

    gce_multicore:
      runner: local_runner
      local_slots: 2
      embed_metadata_in_job: true
    bowtie:
      runner: local_runner
      local_slots: 2
    cluster:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=1"

limits:
  - type: anonymous_user_concurrent_jobs
    value: '1'
  - type: registered_user_concurrent_jobs
    value: '3'
  - type: destination_user_concurrent_jobs
    id: bowtie
    value: '1'

tools:
  - class: local # these special tools that aren't parameterized for remote execution - expression tools, upload, etc
    environment: local_env

  - id: "bowtieForSmallRNA"
    destination: "cluster"

  - id: "bowtie_index_builder_data_manager"
    destination: "gce_multicore"

  - id: "retrieve_fasta_from_NCBI"
    destination: "cluster"
