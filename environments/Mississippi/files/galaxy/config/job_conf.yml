# This file is managed by Ansible.
# Do not edit this file manually. Any changes will be automatically reverted.

runners:
  slurm:
    load: galaxy.jobs.runners.slurm:SlurmJobRunner
    drmaa_library_path: /usr/lib/slurm-drmaa/lib/libdrmaa.so.1

handling:
  assign:
    - db-skip-locked

execution:
  default: cluster_1
  environments:
    cluster_1:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=1"
    cluster_2:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=2"
    cluster_4:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=4"
    cluster_8:
      runner: slurm
      nativeSpecification: "--partition=debug --ntasks=8"

limits:
  - type: anonymous_user_concurrent_jobs
    value: '1'
  - type: registered_user_concurrent_jobs
    value: '10'

  - type: environment_total_concurrent_jobs
    id: cluster_1
    value: 70
  - type: environment_total_concurrent_jobs
    id: cluster_2
    value: 35
  - type: environment_total_concurrent_jobs
    id: cluster_4
    value: 18
  - type: environment_total_concurrent_jobs
    id: cluster_8
    value: 10

  - type: environment_user_concurrent_jobs
    id: cluster_1
    value: 50
  - type: environment_user_concurrent_jobs
    id: cluster_2
    value: 25
  - type: environment_user_concurrent_jobs
    id: cluster_4
    value: 15
  - type: environment_user_concurrent_jobs
    id: cluster_8
    value: 8

tools:
  - class: local # these special tools that aren't parameterized for remote execution - expression tools, upload, etc
    environment: "cluster_1"

  - id: "abyss-pe"
    destination: "cluster_8"

  - id: "bowtie_wrapper"
    destination: "cluster_8"

  - id: "bowtie2"
    destination: "cluster_8"

  - id: "bowtieForSmallRNA"
    destination: "cluster_8"

  - id: "breakdancer_max"
    destination: "cluster_8"

  - id: "bwa"
    destination: "cluster_8"

  - id: "bwa_mem"
    destination: "cluster_8"

  - id: "circgraph"
    destination: "cluster_2"

  - id: "cuffdiff"
    destination: "cluster_8"

  - id: "deeptools_bam_compare"
    destination: "cluster_8"

  - id: "deeptools_bam_coverage"
    destination: "cluster_8"

  - id: "deeptools_bigwig_compare"
    destination: "cluster_8"

  - id: "deeptools_compute_gc_bias"
    destination: "cluster_8"

  - id: "deeptools_compute_matrix"
    destination: "cluster_8"

  - id: "deeptools_multi_bam_summary"
    destination: "cluster_8"

  - id: "deeptools_multi_bigwig_summary"
    destination: "cluster_8"

  - id: "deeptools_plot_coverage"
    destination: "cluster_8"

  - id: "dexseq"
    destination: "cluster_1"

  - id: "fastqc"
    destination: "cluster_8"

  - id: "freebayes"
    destination: "cluster_8"

  - id: "hicexplorer_hicmergematrixbins"
    destination: "cluster_8"

  - id: "hisat2"
    destination: "cluster_8"

  - id: "lofreq_call"
    destination: "cluster_8"

  - id: "lumpy_smoove"
    destination: "cluster_4"

  - id: "macs2_callpeak"
    destination: "cluster_8"

  - id: "manta"
    destination: "cluster_8"
  
  - id: "megahit"
    destination: "cluster_8"

  - id: "metaspades"
    destination: "cluster_8"

  - id: "mircounts"
    destination: "cluster_8"

  - id: "ncbi_blastn_wrapper"
    destination: "cluster_8"

  - id: "ncbi_blastx_wrapper"
    destination: "cluster_8"

  - id: "ncbi_tblastn_wrapper"
    destination: "cluster_8"

  - id: "ncbi_tblastx_wrapper"
    destination: "cluster_8"

  - id: "ngsplot"
    destination: "cluster_8"

  - id: "oaseoptimiserv"
    destination: "cluster_8"

  - id: "oases"
    destination: "cluster_8"

  - id: "picard_MergeSamFiles"
    destination: "cluster_8"

  - id: "picard_AddOrReplaceReadGroups"
    destination: "cluster_8"

  - id: "picard_SortSam"
    destination: "cluster_8"

  - id: "repenrich"
    destination: "cluster_8"

  - id: "repenrich2"
    destination: "cluster_8"

  - id: "retrieve_fasta_from_NCBI"
    destination: "cluster_2"

  - id: "rgrnastar"
    destination: "cluster_8"

  - id: "rna_star"
    destination: "cluster_8"

  - id: "rnaspades"
    destination: "cluster_8"

  - id: "rsembowtie"
    destination: "cluster_8"

  - id: "rsembowtie2"
    destination: "cluster_8"

  - id: "run_TEMP"
    destination: "cluster_8"

  - id: "salmon"
    destination: "cluster_8"

  - id: "sambamba_filter"
    destination: "cluster_1"

  - id: "sambamba_sample_or_filter"
    destination: "cluster_8"

  - id: "samtools_view"
    destination: "cluster_4"

  - id: "spades"
    destination: "cluster_8"

  - id: "sr_bowtie"
    destination: "cluster_8"

  - id: "sr_bowtie_dataset_annotation"
    destination: "cluster_8"

  - id: "tophat2"
    destination: "cluster_8"

  - id: "tp_grep_tool"
    destination: "cluster_1"

  - id: "trinity"
    destination: "cluster_8"

  - id: "yac"
    destination: "cluster_1"
